<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>TRIS GIT</title>
</head>
<body>
    <div class="bottoni"> 
        <input id="sendMessage" class="btn" name="sendMessage" type="button" value="INIZIA UNA NUOVA PARTITA" onclick="resetGame()">
    </div>
    <div id="container-tris">
        <div id="box-00" class="box vuoto" onclick="isValidStep(this)"></div>
        <div id="box-01" class="box vuoto" onclick="isValidStep(this)"></div>
        <div id="box-02" class="box vuoto" onclick="isValidStep(this)"></div>
        <div id="box-10" class="box vuoto" onclick="isValidStep(this)"></div>
        <div id="box-11" class="box vuoto" onclick="isValidStep(this)"></div>
        <div id="box-12" class="box vuoto" onclick="isValidStep(this)"></div>
        <div id="box-20" class="box vuoto" onclick="isValidStep(this)"></div>
        <div id="box-21" class="box vuoto" onclick="isValidStep(this)"></div>
        <div id="box-22" class="box vuoto" onclick="isValidStep(this)"></div>
    </div>

    <script>
        
        function resetGame() {
            var boxes = document.querySelectorAll('.box'); 
            boxes.forEach(function(elemento) {
                elemento.innerHTML = ''
            })
        }
        
        let matrix = [[0,0,0],[0,0,0],[0,0,0]]
        console.log(matrix)
        let riga1 = [matrix[0][0],matrix[0][1],matrix[0][2]];
        let riga2 = [matrix[1][0],matrix[1][1],matrix[1][2]];
        let riga3 = [matrix[2][0],matrix[2][1],matrix[2][2]];
        let col1 = [matrix[0][0],matrix[1][0],matrix[2][0]];
        let col2 = [matrix[0][1],matrix[1][1],matrix[2][1]];
        let col3 = [matrix[2][0],matrix[2][1],matrix[2][2]];
        let diag1 = [matrix[0][0],matrix[1][1],matrix[2][2]];
        let diag2 = [matrix[0][2],matrix[1][1],matrix[2][0]];
        let statiVincenti = [col1,col2,col3,riga1,riga2,riga3,diag1,diag2];

        function controlloVittoria() {
            let arrayPosizioni = [];
            let turno = 1
            var boxes = document.querySelectorAll('.box'); 
            boxes.forEach(function(elemento) {
                arrayPosizioni.push(elemento.innerHTML);
            })
            let stringaVincente = '';
            turno = -turno;
            for(let k in statiVincenti) {
                stringaVincente = '';
                for(let m in statiVincenti[k]){
                    stringaVincente += statiVincenti[k][m].innerHTML;
                }
                if (stringaVincente == 'XXX') {
                    alert('SQUADRA X HA VINTO!');
                }
                else if (stringaVincente == 'OOO') {
                    alert('SQUADRA O HA VINTO!');
                }
            }
            //winCheck(statiVincenti);
        }

        function draw(e) {
            let turno = 1
            console.log(e)
            if(turno == 1) {
                e.innerHTML = 'X';
                e.classList.replace('vuoto','pienoX');
                turno = -turno
            } else {
                e.innerHTML = 'O';
                e.classList.replace('vuoto','pienoO');
                turno = -turno
            }
        }

        function isValidStep(e) {
            e.innerHTML != '' ? console.log('not valid step') : draw(e)
        }


        // boxes.forEach(function(elemento) {
        //     elemento.addEventListener("click", function(){
        //         if(this.classList.contains('vuoto')) {
        //             if(turno == 1) {
        //                 this.innerHTML = 'X';
        //                 this.classList.replace('vuoto','pienoX');
        //             }
        //             else {
        //                 this.innerHTML = 'O';
        //                 this.classList.replace('vuoto','pienoO');
        //             }
        //             controlloVittoria(); 
        //         }
        //         else {
        //             alert('La cella è già piena!');
        //         }
        //     });
        // });


    </script>
</body>
</html>

<style>
    body {
        display: flex;
        justify-content: center;
        align-items:center;
    }
    #container-tris {
        display: grid;
        grid-template-columns: 33.3333% 33.3333% 33.3333%;
        grid-template-rows: 33.3333% 33.3333% 33.3333%;
        background-color: #fff;
        width: 600px;
        height: 600px;
    }
    .box {
        border: 1px solid;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 200px;
        font-family: sans-serif;
    }
    </style>